<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Book</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
<div th:replace="~{fragments/header :: header}"></div>
<h2 class="mb-4">Edit Book</h2>

<form method="post" th:action="@{/admin/books/edit/{bookId}(bookId=${book.id})}" th:object="${bookRequest}" class="border p-4 rounded shadow-sm">
    <div class="mb-3">
        <label class="form-label">Title:</label>
        <input type="text" class="form-control" name="title" th:field="*{title}" placeholder="Leave empty to keep current">
        <div class="text-danger" th:if="${#fields.hasErrors('title')}" th:text="${#fields.errors('title')[0]}"></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Author:</label>
        <select class="form-select" name="authorId" th:field="*{authorId}">
            <option value="" selected>Keep Current</option>
            <option th:each="author : ${authors}" th:value="${author.id}" th:text="${author.name}"></option>
        </select>
        <div class="text-danger" th:if="${#fields.hasErrors('authorId')}" th:text="${#fields.errors('authorId')[0]}"></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Genre:</label>
        <input type="text" class="form-control" name="genre" th:field="*{genre}" placeholder="Leave empty to keep current">
        <div class="text-danger" th:if="${#fields.hasErrors('genre')}" th:text="${#fields.errors('genre')[0]}"></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Description:</label>
        <textarea class="form-control" name="description" th:field="*{description}" placeholder="Leave empty to keep current"></textarea>
        <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:text="${#fields.errors('description')[0]}"></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Publisher:</label>
        <input type="text" class="form-control" name="publisher" th:field="*{publisher}" placeholder="Leave empty to keep current">
        <div class="text-danger" th:if="${#fields.hasErrors('publisher')}" th:text="${#fields.errors('publisher')[0]}"></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Publish Date:</label>
        <input type="date" class="form-control" name="publishDate" th:field="*{publishDate}" placeholder="Leave empty to keep current">
        <div class="text-danger" th:if="${#fields.hasErrors('publishDate')}" th:text="${#fields.errors('publishDate')[0]}"></div>
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
    <a href="/admin" class="btn btn-secondary ms-2">Back to Admin Panel</a>
</form>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
