<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<h2>Admin Dashboard</h2>

<!-- Navigation Buttons -->
<a href="/admin/books/add"><button>Add Book</button></a>
<a href="/admin/authors/add"><button>Add Author</button></a>

<!-- Dropdown to select which entity list to display -->
<label for="entitySelect">Show:</label>
<select id="entitySelect" onchange="showEntityList()">
    <option value="books">Books</option>
    <option value="authors">Authors</option>
    <option value="users">Users</option>
    <option value="comments">Comments</option>
</select>

<!-- Books Management -->
<div id="booksList">
    <h3>Books</h3>
    <ul>
        <li th:each="book : ${books}">
            <span th:text="${book.title} + ' by ' + ${book.author.name}"></span>
            <a th:href="@{/admin/books/edit/{bookId}(bookId=${book.id})}"><button>Edit</button></a>
            <form method="post" th:action="@{/admin/books/delete/{bookId}(bookId=${book.id})}">
                <button type="submit">Delete</button>
            </form>
        </li>
    </ul>
</div>

<!-- Authors Management -->
<div id="authorsList" style="display:none;">
    <h3>Authors</h3>
    <ul>
        <li th:each="author : ${authors}">
            <span th:text="${author.name}"></span>
            <a th:href="@{/admin/authors/edit/{authorId}(authorId=${author.id})}"><button>Edit</button></a>
            <form method="post" th:action="@{/admin/authors/delete/{authorId}(authorId=${author.id})}">
                <button type="submit">Delete</button>
            </form>
        </li>
    </ul>
</div>

<!-- Users Management -->
<div id="usersList" style="display:none;">
    <h3>Users</h3>
    <ul>
        <li th:each="user : ${users}">
            <span th:text="${user.username}"></span>
            <form method="post" th:action="@{/admin/users/delete/{userId}(userId=${user.id})}">
                <button type="submit">Delete</button>
            </form>
        </li>
    </ul>
</div>

<!-- Comments Management -->
<div id="commentsList" style="display:none;">
    <h3>Comments</h3>
    <ul>
        <li th:each="comment : ${comments}">
            <span th:text="${comment.text} + ' - ' + ${comment.author.username}"></span>
            <form method="post" th:action="@{/admin/comments/edit/{commentId}(commentId=${comment.id})}">
                <input type="text" name="text" required>
                <button type="submit">Edit</button>
            </form>
            <form method="post" th:action="@{/admin/comments/delete/{commentId}(commentId=${comment.id})}">
                <button type="submit">Delete</button>
            </form>
        </li>
    </ul>
</div>

<p><a href="/">Back to Home</a></p>

<script>
    function showEntityList() {
        document.getElementById("booksList").style.display = "none";
        document.getElementById("authorsList").style.display = "none";
        document.getElementById("usersList").style.display = "none";
        document.getElementById("commentsList").style.display = "none";

        let selected = document.getElementById("entitySelect").value;
        document.getElementById(selected + "List").style.display = "block";
    }
</script>
</body>
</html>
